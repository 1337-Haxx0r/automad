/*
 *	                  ....
 *	                .:   '':.
 *	                ::::     ':..
 *	                ::.         ''..
 *	     .:'.. ..':.:::'    . :.   '':.
 *	    :.   ''     ''     '. ::::.. ..:
 *	    ::::.        ..':.. .''':::::  .
 *	    :::::::..    '..::::  :. ::::  :
 *	    ::'':::::::.    ':::.'':.::::  :
 *	    :..   ''::::::....':     ''::  :
 *	    :::::.    ':::::   :     .. '' .
 *	 .''::::::::... ':::.''   ..''  :.''''.
 *	 :..:::'':::::  :::::...:''        :..:
 *	 ::::::. '::::  ::::::::  ..::        .
 *	 ::::::::.::::  ::::::::  :'':.::   .''
 *	 ::: '::::::::.' '':::::  :.' '':  :
 *	 :::   :::::::::..' ::::  ::...'   .
 *	 :::  .::::::::::   ::::  ::::  .:'
 *	  '::'  '':::::::   ::::  : ::  :
 *	            '::::   ::::  :''  .:
 *	             ::::   ::::    ..''
 *	             :::: ..:::: .:''
 *	               ''''  '''''
 *	
 *
 *	AUTOMAD GUI 
 *	
 *	version 18.03.11
 *
 *	Copyright (c) 2014-2018 by Marc Anton Dahmen
 *	http://marcdahmen.de
 *
 *	Licensed under the MIT license.
 *	http://automad.org/license
 */+function(t,e,a){t.addVariable={selectors:{container:"#am-add-variable-container",modal:"#am-add-variable-modal",modalInput:"#am-add-variable-input",submit:"#am-add-variable-submit"},dataAttr:{errorName:"data-am-error-name",errorExists:"data-am-error-exists"},append:function(o){var i=t.addVariable,n=t.util,d=e(o.target),r=e(i.selectors.container),l=e(i.selectors.modalInput),s=l.val().replace(/[^\w\.\-]/g,"_").toLowerCase();0==e("#am-input-data-"+s).length?s?e.post("?ajax=add_variable",{name:s
},function(t){a.modal(i.selectors.modal).hide(),l.val(""),r.append(t),e("#am-input-data-"+s).focus()}):t.notify.error(d.data(n.dataCamelCase(i.dataAttr.errorName))):t.notify.error(d.data(n.dataCamelCase(i.dataAttr.errorExists)))}},e(document).on("click",t.addVariable.selectors.submit,t.addVariable.append)}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e){t.autocomplete={data:{},selectors:{submit:"[data-am-autocomplete-submit]"},submitForm:function(t){t.preventDefault()
;var a=e(t.target).closest("form");setTimeout(function(){a.submit()},50)}},e(document).on("ready",function(){e(".am-dashboard").length>0&&e.post("?ajax=autocomplete",function(e){t.autocomplete.data=e},"json")}),e(document).on("keydown",t.autocomplete.selectors.submit+' .am-u-autocomplete input[type="search"]',function(e){13==e.which&&t.autocomplete.submitForm(e)}),e(document).on("click",t.autocomplete.selectors.submit+" .am-u-dropdown a",t.autocomplete.submitForm)
}(window.Automad=window.Automad||{},jQuery),function(t,e){t.clipboard={dataAttr:"data-am-clipboard",copy:function(a){a.preventDefault();var o=e(this).data(t.util.dataCamelCase(t.clipboard.dataAttr)),i=e('<input type="text" />').css({position:"fixed",top:-1e3}).attr("contenteditable","true").appendTo(e("body")).val(o),n=!1;if(navigator.userAgent.match(/ipad|ipod|iphone/i)){var d=i.get(0),r=document.createRange(),l=window.getSelection();r.selectNodeContents(d),l.removeAllRanges(),l.addRange(r),
d.setSelectionRange(0,999999)}else i.select();n=document.execCommand("copy"),i.remove(),n&&t.notify.success(o)}},e(document).on("click","["+t.clipboard.dataAttr+"]",t.clipboard.copy)}(window.Automad=window.Automad||{},jQuery),function(t,e,a){t.copyResized={dataAttr:{fileInfo:"data-am-file-info",url:"data-am-url"},selectors:{modal:"#am-copy-resized-modal",button:"#am-copy-resized-submit",filename:"#am-copy-resized-filename",width:"#am-copy-resized-width",height:"#am-copy-resized-height",
crop:"#am-copy-resized-crop"},destroy:function(){var a=t.copyResized.selectors;e(a.filename).val(""),e(a.width).val(""),e(a.height).val("")},init:function(){var a=t.copyResized,o=a.dataAttr,i=a.selectors,n=e(this).closest("["+o.fileInfo+"]"),d=n.data(t.util.dataCamelCase(o.fileInfo)),r=e(i.modal);e(i.filename).val(d.filename),e(i.width).val(d.img.originalWidth),e(i.height).val(d.img.originalHeight),r.off("hide.uk.modal.automad.copyResized"),r.on("hide.uk.modal.automad.copyResized",a.destroy)},
submit:function(o){var i=t.copyResized,n=i.selectors,d=e(o.target),r={url:e(n.modal).data(t.util.dataCamelCase(i.dataAttr.url)),filename:e(n.filename).val(),width:e(n.width).val(),height:e(n.height).val(),crop:Number(e(n.crop).is(":checked"))};d.prop("disabled",!0),e.post("?ajax=copy_resized",r,function(o){d.prop("disabled",!1),o.debug&&t.debug.log("copy_resized",o.debug),o.error&&t.notify.error(o.error),o.success&&t.notify.success(o.success),
e(n.modal).on("hide.uk.modal.automad.copyResized",function(){i.destroy(),e(n.modal).closest("form").empty().submit()}),a.modal(n.modal).hide()},"json")}},e(document).on("click",'a[href="'+t.copyResized.selectors.modal+'"]',t.copyResized.init),e(document).on("click",t.copyResized.selectors.button,t.copyResized.submit)}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e){t.count={dataAttr:"data-am-count",get:function(a){var o=t.count;e("["+o.dataAttr+"]").each(function(){
var a=e(this),i=a.data(t.util.dataCamelCase(o.dataAttr));a.text(e(i).length)})},init:function(){var a=t.count;e(document).on("ready ajaxComplete count.automad",a.get)}},t.count.init()}(window.Automad=window.Automad||{},jQuery),function(t,e){t.datetime={selector:"[data-am-datetime]",init:function(){var a=e(document),o=t.datetime;a.on("change",o.selector+" [data-am-u-datepicker]",o.update.date),a.on("change",o.selector+" [data-am-u-timepicker]",o.update.time),
a.on("focus",o.selector+" input",function(t){var a=e(t.target),i=a.closest(o.selector);i.addClass("am-u-active"),a.on("blur.automad",function(){i.removeClass("am-u-active"),a.off("blur.automad")})}),a.on("click",o.selector+" [data-am-clear-date]",function(){var t=e(this).closest(o.selector);t.find("[data-am-u-timepicker]").val(""),t.find("[data-am-u-datepicker]").val("").trigger("change")})},today:function(){var t=new Date,e=t.getMonth()+1,a=t.getDate()
;return t.getFullYear()+"-"+((""+e).length<2?"0":"")+e+"-"+((""+a).length<2?"0":"")+a},update:{date:function(a){var o=e(a.target),i=t.datetime,n=o.closest(i.selector),d=n.find('input[type="hidden"]'),r=o.val(),l=n.find("[data-am-u-timepicker]");time=l.val(),r?(time||(time="12:00",l.val(time)),d.val(r+" "+time+":00")):(d.val(""),l.val("")),d.trigger("change")},time:function(a){
var o=e(a.target),i=t.datetime,n=o.closest(i.selector),d=n.find('input[type="hidden"]'),r=o.val(),l=n.find("[data-am-u-datepicker]");date=l.val(),r||(r="12:00",o.val(r)),date||(date=i.today(),l.val(date)),d.val(date+" "+r+":00").trigger("change")}}},t.datetime.init()}(window.Automad=window.Automad||{},jQuery),function(t,e){t.debug={log:function(t,e){var a={};a["Ajax: "+t]=e,console.log(a)}}}(window.Automad=window.Automad||{},jQuery),function(t,e,a){t.editFileInfo={dataAttr:{
fileInfo:"data-am-file-info",url:"data-am-url",ext:"data-am-extension"},selectors:{modal:"#am-edit-file-info-modal",button:"#am-edit-file-info-submit",img:"#am-edit-file-info-img",icon:"#am-edit-file-info-icon",oldName:"#am-edit-file-info-old-name",newName:"#am-edit-file-info-new-name",caption:"#am-edit-file-info-caption",download:"#am-edit-file-info-download"},destroy:function(){var a=t.editFileInfo,o=a.dataAttr,i=a.selectors;e(i.img).attr("src","").removeAttr("width").removeAttr("height"),
e(i.icon).attr(o.ext,"").html(""),e(i.download).attr("href",""),e(i.oldName).val(""),e(i.newName).val(""),e(i.caption).val("").trigger("keyup")},init:function(){var a=t.editFileInfo,o=t.util,i=a.dataAttr,n=a.selectors,d=e(this).closest("["+i.fileInfo+"]"),r=d.data(o.dataCamelCase(i.fileInfo)),l=e(n.modal);r.img?e(n.img).attr("src",r.img.src).attr("width",r.img.width).attr("height",r.img.height):e(n.icon).attr(i.ext,r.extension).append(e("<i></i>",{
class:"am-u-icon-file-o am-files-icon-"+r.extension})),e(n.oldName).val(r.filename),e(n.newName).val(r.filename),e(n.caption).val(r.caption).trigger("keyup"),e(n.download).attr("href",r.download),l.off("hide.uk.modal.automad.editFileInfo"),l.on("hide.uk.modal.automad.editFileInfo",a.destroy)},submit:function(o){var i=t.editFileInfo,n=i.selectors,d=e(o.target),r={url:e(n.modal).data(t.util.dataCamelCase(i.dataAttr.url)),"old-name":e(n.oldName).val(),"new-name":e(n.newName).val(),
caption:e(n.caption).val()};d.prop("disabled",!0),e.post("?ajax=edit_file_info",r,function(o){d.prop("disabled",!1),o.error&&t.notify.error(o.error),e(n.modal).on("hide.uk.modal.automad.editFileInfo",function(){i.destroy(),e(n.modal).closest("form").empty().submit()}),a.modal(n.modal).hide()},"json")}},e(document).on("click",'a[href="'+t.editFileInfo.selectors.modal+'"]',t.editFileInfo.init),e(document).on("click",t.editFileInfo.selectors.button,t.editFileInfo.submit)
}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e,a){t.form={unsavedClassPrefix:"am-unsaved-",dataAttr:{handler:"data-am-handler",url:"data-am-url",submit:"data-am-submit",init:"data-am-init",autoSubmit:"data-am-auto-submit",close:"data-am-close-on-success",confirm:"data-am-confirm",enter:"data-am-enter",watchExclude:"data-am-watch-exclude"},ajaxPost:function(o){var i=t.form,n=(i.dataAttr,
e(o.target)),d=n.data(t.util.dataCamelCase(i.dataAttr.handler)),r=n.data(t.util.dataCamelCase(i.dataAttr.url)),l=n.serializeArray();r&&l.push({name:"url",value:r}),e.post("?ajax="+d,l,function(e){if(e.debug&&t.debug.log(d,e.debug),e.redirect&&(window.location.href=e.redirect),e.html&&n.html(e.html),e.error&&t.notify.error(e.error),e.success&&t.notify.success(e.success),!e.error){var o=n.data(t.util.dataCamelCase(i.dataAttr.close));o&&a.modal(o).hide()}},"json")},confirm:function(o){
o.preventDefault();var i=t.form,n=e(o.target),d=n.data(t.util.dataCamelCase(i.dataAttr.confirm));d&&n.find("input").length>0?a.modal.confirm(d,function(){i.ajaxPost(o)}):i.ajaxPost(o)},init:function(){var a=e(document),o=t.form,i=o.dataAttr;a.on("submit","["+i.handler+"]",o.confirm),a.on("click","["+i.submit+"]",function(a){var o=e(this).data(t.util.dataCamelCase(i.submit));a.preventDefault(),e("form["+i.handler+'="'+o+'"]').submit()}),a.ready(function(){
e("["+t.form.dataAttr.init+"]").trigger("submit")}),a.on("keydown","["+i.handler+"] input",function(t){13==t.which&&t.preventDefault()}),a.on("keydown","["+i.enter+"]",function(a){if(13==a.which){var o=e(a.target).data(t.util.dataCamelCase(i.enter));e(o).click()}}),a.on("change drop cut paste","["+i.autoSubmit+"] input, ["+i.autoSubmit+"] textarea, ["+i.autoSubmit+"] select",function(t){e(t.target).closest("form").submit()}),a.on("ready",function(){e("button["+i.submit+"]").prop("disabled",!0)
}),a.on("ajaxComplete",function(t,a,o){var n=o.url.replace("?ajax=","");e("button["+i.submit+'="'+n+'"]').prop("disabled",!0)}),a.on("change drop cut paste keydown","["+i.handler+"]:not(["+i.autoSubmit+"]) input:not(["+i.watchExclude+"]), ["+i.handler+"]:not(["+i.autoSubmit+"]) textarea:not(["+i.watchExclude+"]), ["+i.handler+"]:not(["+i.autoSubmit+"]) select:not(["+i.watchExclude+"])",function(){var a=e(this).closest("["+i.handler+"]"),n=a.data(t.util.dataCamelCase(i.handler))
;e("html").addClass(o.unsavedClassPrefix+n),e("button["+i.submit+'="'+n+'"]:disabled').prop("disabled",!1),e(this).prevAll(".am-u-form-label").addClass("am-form-changed"),e(this).closest(".am-u-form-icon, .am-u-htmleditor, [data-am-toggle], [data-am-datetime]").prev(".am-u-form-label").addClass("am-form-changed"),e(this).closest(".am-u-grid").prev(".am-u-form-label").addClass("am-form-changed")}),a.on("submit","["+i.handler+"]",function(){var a=e(this).data(t.util.dataCamelCase(i.handler))
;e("html").removeClass(o.unsavedClassPrefix+a)}),window.onbeforeunload=function(){if(e('html[class*="am-unsaved-"]').length)return"You have unsaved chages!"},a.on("ready ajaxComplete",o.modalEvents),a.on("ready ajaxComplete",function(){setTimeout(function(){e(".CodeMirror:not(.am-change-event)").each(function(){var t=e(this),a=t[0].CodeMirror,o=t.prev();t.addClass("am-change-event"),a.on("change",function(){o.trigger("change")})})},500)})},modalEvents:function(){var a=e(".am-u-modal")
;a.off("show.uk.modal.automad.form"),a.off("hide.uk.modal.automad.form"),a.on({"show.uk.modal.automad.form":function(){e(this).find("["+t.form.dataAttr.init+"]").each(function(){e(this).empty().submit()}),e("html.am-u-notouch").length&&e(this).find('input:not(:disabled, [type="hidden"], [type="search"])').first().focus()},"hide.uk.modal.automad.form":function(){e(this).find("form").each(function(){var a=e(this).data(t.util.dataCamelCase(t.form.dataAttr.handler))
;e("html").removeClass(t.form.unsavedClassPrefix+a),this.reset()})}})}},t.form.init()}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e){e.on("beforeready.uk.dom",function(){t.extend(e.components.htmleditor.prototype.defaults,{markdown:!0,toolbar:["bold","italic","link","image","blockquote","listUl","listOl"]})})}(jQuery,UIkit),function(t,e){t.inPage={selectors:{modal:"#am-inpage-edit-modal",title:"#am-inpage-edit-modal-title",fields:"#am-inpage-edit-fields",
menubar:".am-inpage-menubar",dragHandle:".am-drag-handle"},dataAttr:{content:"data-am-inpage-content",handler:"data-am-inpage-handler",url:"data-am-inpage-url"},modal:{init:function(){var a=e(this),o=t.inPage,i=t.util,n=a.data(i.dataCamelCase(o.dataAttr.content)),d=e(o.selectors.modal),r=e(o.selectors.title),l=d.find("form"),s=l.data(i.dataCamelCase(o.dataAttr.handler)),u=e("<i></i>",{class:"am-u-icon-circle-o-notch am-u-icon-spin am-u-icon-small"}).insertAfter(r.parent()),c=l.find(".am-u-modal-footer")
;r.empty(),e(o.selectors.fields).remove(),e.post(s,n,function(t){if(t.html){var a=e(t.html).insertBefore(c).hide(),o=a.find('[name="context"]').val();r.text(o),setTimeout(function(){e(window).resize()},400),setTimeout(function(){u.remove(),a.fadeIn(300,function(){e(window).resize(),a.find(".am-u-form-controls, textarea").focus()})},600)}},"json")},submit:function(a){a.preventDefault();var o=e(a.target),i=o.data(t.util.dataCamelCase(t.inPage.dataAttr.handler)),n=o.serializeArray()
;e.post(i,n,function(e){e.debug&&t.debug.log(i,e.debug),e.redirect&&(window.location.href=e.redirect)},"json")}},menubar:{init:function(){var a=t.inPage.selectors;e(a.menubar).draggabilly({handle:a.dragHandle})}}},e(document).on("click",'[href="'+t.inPage.selectors.modal+'"]',t.inPage.modal.init),e(document).on("submit","["+t.inPage.dataAttr.handler+"]",t.inPage.modal.submit),e(document).on("ready",t.inPage.menubar.init)}(window.Automad=window.Automad||{},jQuery),function(t){
t(document).ready(function(){t("#am-no-js").remove()})}(jQuery),function(t,e){t.keyCombos={init:function(){e(window).bind("keydown",function(t){if(t.ctrlKey||t.metaKey)switch(String.fromCharCode(t.which).toLowerCase()){case"s":t.preventDefault(),e('.am-navbar [data-am-submit], .am-inpage .am-u-open [type="submit"]').click();break;case" ":t.preventDefault(),e('.am-navbar-search [name="query"]').focus()}})}},t.keyCombos.init()}(window.Automad=window.Automad||{},jQuery),function(t,e,a){t.notify={
error:function(t){a.notify(t,{timeout:1e4,pos:"top-right",status:"danger"})},success:function(t){a.notify(t,{timeout:3e3,pos:"top-right",status:"success"})}}}(window.Automad=window.Automad||{},jQuery,UIkit),function(t){t(document).on("click",".am-remove-parent",function(){var e=t(this).parent();e.find("input, textarea").trigger("change"),e.remove(),t(document).trigger("count.automad")})}(jQuery),function(t,e){t.scrollPosition={init:function(){var t=e(document),a=e("html")
;e(window).scroll(function(){this.scrolling&&clearTimeout(this.scrolling),this.scrolling=setTimeout(function(){e(this).trigger("scrolled.automad")},10)}),e(window).on("load scrolled.automad",function(){var e=t.scrollTop(),o="am-scrolled";e>30?a.addClass(o):a.removeClass(o)})}},e(document).ready(t.scrollPosition.init)}(window.Automad=window.Automad||{},jQuery),function(t,e){t.scrollbars={defaults:{scrollToItem:!1},dataAttr:"data-am-scroll-box",init:function(){var a=t.scrollbars,o=t.util
;e("["+a.dataAttr+"]").each(function(){var t=e(this),i=t.data(o.dataCamelCase(a.dataAttr)),n=e.extend({},a.defaults,i);if(t.mCustomScrollbar({scrollbarPosition:"inside",theme:"minimal-dark",autoHideScrollbar:!0,scrollInertia:50,scrollButtons:{enable:!1},callbacks:{onScroll:function(){t.trigger("scrolled.automad")},onUpdate:function(){t.trigger("scrolled.automad")}}}),n.scrollToItem){var d=t.find(n.scrollToItem);d.length&&setTimeout(function(){
d.offset().top+180>e(window).height()&&t.mCustomScrollbar("scrollTo",function(){return d.offset().top-e(window).height()+180},{scrollInertia:200})},150)}})}},e(document).ready(t.scrollbars.init)}(window.Automad=window.Automad||{},jQuery),function(t,e){t.siteTree={class:{active:"am-u-active",iconOpen:"am-tree-icon-open",iconClose:"am-tree-icon-close",toggle:"am-tree-toggle"},dataAttr:"data-am-tree",urlAsValue:function(a,o){
var i=t.siteTree,n=a.find('a[href^="?"]'),d=a.find("."+i.class.active+' > a[href^="?"]');d.length>0&&o.val(decodeURIComponent(d.attr("href").split("=")[1])),n.click(function(t){t.preventDefault();var n=e(this),d=n.parent(),r=decodeURIComponent(n.attr("href").split("=")[1]);a.find("."+i.class.active).removeClass(i.class.active),d.addClass(i.class.active),d.find("> a").has("."+i.class.iconOpen).click(),o.val(r).trigger("change")})},init:function(){var a=t.siteTree
;e("["+a.dataAttr+"]").each(function(){var o=e(this),i=o.data(t.util.dataCamelCase(a.dataAttr));o.find("li li").has("li").each(function(){var t=e(this),o=t.children("ul"),i=e("<a></a>",{class:a.class.toggle,href:"#"}).prependTo(t),n=e("<i></i>").prependTo(i);t.hasClass(a.class.active)||t.find("."+a.class.active).length>0?n.addClass(a.class.iconClose):(n.addClass(a.class.iconOpen),o.hide()),i.click(function(t){t.preventDefault(),o.toggle(),n.toggleClass(a.class.iconOpen+" "+a.class.iconClose)})
}),i.length>0&&a.urlAsValue(o,e(i))})}},e(document).ready(t.siteTree.init)}(window.Automad=window.Automad||{},jQuery),function(t,e){t.status={dataAttr:"data-am-status",get:function(){var a=t.status;e("["+a.dataAttr+"]").each(function(){var o=e(this),i=o.data(t.util.dataCamelCase(a.dataAttr));e.post("?ajax=status",{item:i},function(t){o.html(t.status)},"json")})},init:function(){var a=e(document),o=t.status;a.ready(function(){o.get()}),a.ajaxComplete(function(t,e,a){"?ajax=status"!=a.url&&o.get()
})}},t.status.init()}(window.Automad=window.Automad||{},jQuery),function(t,e,a){t.switcher={dataAttr:{switcher:"data-am-u-switcher",tab:"data-am-tab"},getActiveTab:function(){return window.location.hash?e("["+t.switcher.dataAttr.tab+'="'+window.location.hash.substr(1)+'"]').index():0}},a.on("beforeready.uk.dom",function(){e.extend(a.components.switcher.prototype.defaults,{active:t.switcher.getActiveTab()})}),e(window).on("hashchange",function(){
var a=e("["+t.switcher.dataAttr.switcher+"]"),o=a.children(".am-u-active"),i=t.switcher.getActiveTab();o.index()!=i&&a.children("button").eq(i).click()}),e(document).on("ready",function(){e("["+t.switcher.dataAttr.switcher+"]").on("show.uk.switcher",function(e,a){window.location.hash=a.data(t.util.dataCamelCase(t.switcher.dataAttr.tab))})})}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e){t.textarea={selector:"textarea.am-u-form-controls:not([data-am-u-htmleditor])",
handleTabs:function(t){if(9===t.keyCode){t.preventDefault();var a=this.selectionStart,o=this.selectionEnd,i=e(t.target),n=i.val();i.val(n.substring(0,a)+"\t"+n.substring(o)),this.selectionStart=this.selectionEnd=a+1}},init:function(){var a=t.textarea,o=e(document);o.on("keyup focus focusout update.automad.textarea",a.selector,a.resize),o.on("drop cut paste",a.selector,function(t){var a=e(t.target);setTimeout(function(t){a.trigger("update.automad.textarea")},50)}),o.ajaxComplete(function(){
e(a.selector).trigger("update.automad.textarea")}),o.on("click","[data-am-u-toggle]",function(){e(a.selector).trigger("update.automad.textarea")}),e(window).resize(function(){e(a.selector).trigger("update.automad.textarea")}),o.on("keydown",a.selector,a.handleTabs)},resize:function(t){var a=e(t.target),o=a.val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />"),i=e("<div></div>").appendTo("body").hide().width(a.width()).html(o+" ").css({"white-space":"pre-wrap",
"word-wrap":"break-word","overflow-wrap":"break-word","font-family":a.css("font-family"),"font-size":a.css("font-size"),"line-height":a.css("line-height"),"letter-spacing":a.css("letter-spacing")});a.height(i.height()),i.remove()}},t.textarea.init()}(window.Automad=window.Automad||{},jQuery),function(t,e){t.toggle={labelDataAttr:"data-am-toggle",class:{active:"am-u-active"},checkbox:function(a){t.toggle.update(e(a.target))},init:function(){e("["+t.toggle.labelDataAttr+"] input").each(function(){
t.toggle.update(e(this))})},radio:function(a){e('input[name="'+e(a.target).attr("name")+'"]').each(function(){t.toggle.update(e(this))})},update:function(a){var o=t.toggle,i=a.parent(),n=i.data(t.util.dataCamelCase(o.labelDataAttr));if(a.is(":checked")?i.addClass(o.class.active):i.removeClass(o.class.active),n){var d=e(n);a.is(":checked")?d.addClass(o.class.active):d.removeClass(o.class.active)}}},e(document).on("change","["+t.toggle.labelDataAttr+'] [type="checkbox"]',t.toggle.checkbox),
e(document).on("change","["+t.toggle.labelDataAttr+'] [type="radio"]',t.toggle.radio),e(document).on("ready ajaxComplete",t.toggle.init)}(window.Automad=window.Automad||{},jQuery),function(t,e){e(document).on("ready ajaxComplete",function(){setTimeout(function(){e("html.am-u-touch [data-am-u-tooltip]").removeAttr("data-am-u-tooltip")},200)})}(window.Automad=window.Automad||{},jQuery),function(t,e){t.upload={dataAttr:{url:"data-am-url",dropzoneText:"data-am-dropzone-text",
browseText:"data-am-browse-text"},selectors:{modal:"#am-upload-modal",container:"#am-upload-container"},$modal:"",$container:"",$close:"",page:"",$dropzone:e("<div></div>",{class:"am-files-dropzone am-u-hidden-touch"}),$input:e('<input type="file" multiple />'),$browse:e("<button></button>",{class:"am-u-button am-u-button-success am-u-button-large am-u-width-1-1 am-u-margin-small-top"}).click(function(){return t.upload.$input.click(),!1}),init:function(a){var o=t.upload,i=t.util,n=o.dataAttr
;o.$modal=e(o.selectors.modal),o.$container=e(o.selectors.container).empty(),o.page=o.$modal.data(i.dataCamelCase(n.url)),o.$dropzone.html('<i class="am-u-icon-mouse-pointer"></i>&nbsp;&nbsp;'+o.$modal.data(i.dataCamelCase(n.dropzoneText))).appendTo(o.$container),o.$input.appendTo(o.$dropzone).hide(),o.$browse.html('<i class="am-u-icon-folder-open"></i>&nbsp;&nbsp;'+o.$modal.data(i.dataCamelCase(n.browseText))).insertAfter(o.$dropzone),o.$close=o.$modal.find(".am-u-modal-close"),o.plugin(),
e(o.selectors.modal).on("hide.uk.modal",{$filesForm:o.$modal.closest("form")},o.refresh)},plugin:function(){var a=t.upload;a.$input.fileupload({url:"?ajax=upload",dataType:"json",dropZone:a.$dropzone,sequentialUploads:!0,singleFileUploads:!0,formData:[{name:"url",value:a.page}],add:function(o,i){var n="";e.each(i.files,function(e){n+='<div class="am-text-white am-u-text-truncate">'+i.files[e].name+'</div><div class="am-u-text-small am-u-text-muted">'+t.util.formatBytes(i.files[e].size)+"</div>"}),
i.context=e("<div></div>",{class:"am-u-margin-top"}).appendTo(a.$container),e(n).appendTo(i.context),e('<div class="am-u-progress am-u-progress-striped am-u-active"><div class="am-u-progress-bar"></div></div>').appendTo(i.context),i.context.find(".am-u-progress-bar").width("0px"),i.submit(),a.$close.prop("disabled",!0)},progress:function(t,e){var a=parseInt(e.loaded/e.total*100,10);e.context.find(".am-u-progress-bar").width(a+"%").text(a+" %")},stop:function(t){a.$close.prop("disabled",!1)},
done:function(e,a){a.context.find(".am-u-progress").removeClass("am-u-progress-striped am-u-active"),a.result.error?a.context.find(".am-u-progress").addClass("am-u-progress-danger").find(".am-u-progress-bar").text(a.result.error):a.context.find(".am-u-progress").addClass("am-u-progress-success"),a.result.debug&&t.debug.log("upload",a.result.debug)},fail:function(t,e){e.context.find(".am-u-progress").addClass("am-u-progress-danger").removeClass("am-u-progress-striped am-u-active"),
e.context.find(".am-u-progress-bar").text("Error")}})},refresh:function(t){t.data.$filesForm.empty().submit()}},e(document).on("click",'[href="'+t.upload.selectors.modal+'"]',t.upload.init),e(document).on("drop dragover",t.upload.selectors.modal,function(t){t.preventDefault()})}(window.Automad=window.Automad||{},jQuery),function(t,e){t.util={dataCamelCase:function(t){return t=t.replace(/data-/g,""),t=t.replace(/\-[a-z]/g,function(t){return t.charAt(1).toUpperCase()})},formatBytes:function(t){
return"number"!=typeof t?"":t>=1e9?(t/1e9).toFixed(2)+" gb":t>=1e6?(t/1e6).toFixed(2)+" mb":(t/1e3).toFixed(2)+" kb"}}}(window.Automad=window.Automad||{},jQuery);
/*
 *	                  ....
 *	                .:   '':.
 *	                ::::     ':..
 *	                ::.         ''..
 *	     .:'.. ..':.:::'    . :.   '':.
 *	    :.   ''     ''     '. ::::.. ..:
 *	    ::::.        ..':.. .''':::::  .
 *	    :::::::..    '..::::  :. ::::  :
 *	    ::'':::::::.    ':::.'':.::::  :
 *	    :..   ''::::::....':     ''::  :
 *	    :::::.    ':::::   :     .. '' .
 *	 .''::::::::... ':::.''   ..''  :.''''.
 *	 :..:::'':::::  :::::...:''        :..:
 *	 ::::::. '::::  ::::::::  ..::        .
 *	 ::::::::.::::  ::::::::  :'':.::   .''
 *	 ::: '::::::::.' '':::::  :.' '':  :
 *	 :::   :::::::::..' ::::  ::...'   .
 *	 :::  .::::::::::   ::::  ::::  .:'
 *	  '::'  '':::::::   ::::  : ::  :
 *	            '::::   ::::  :''  .:
 *	             ::::   ::::    ..''
 *	             :::: ..:::: .:''
 *	               ''''  '''''
 *	
 *
 *	AUTOMAD GUI 
 *	
 *	version 17.07.30
 *
 *	Copyright (c) 2014-2017 by Marc Anton Dahmen
 *	http://marcdahmen.de
 *
 *	Licensed under the MIT license.
 *	http://automad.org/license
 */+function(t,a,e){t.addVariable={selectors:{container:"#am-add-variable-container",modal:"#am-add-variable-modal",modalInput:"#am-add-variable-input",submit:"#am-add-variable-submit"},dataAttr:{errorName:"data-am-error-name",errorExists:"data-am-error-exists"},append:function(o){var n=t.addVariable,i=t.util,r=a(o.target),d=a(n.selectors.container),s=a(n.selectors.modalInput),l=s.val().replace(/[^\w\.\-]/g,"_").toLowerCase();0==a("#am-input-data-"+l).length?l?a.post("?ajax=add_variable",{name:l
},function(t){e.modal(n.selectors.modal).hide(),s.val(""),d.append(t),a("#am-input-data-"+l).focus()}):t.notify.error(r.data(i.dataCamelCase(n.dataAttr.errorName))):t.notify.error(r.data(i.dataCamelCase(n.dataAttr.errorExists)))}},a(document).on("click",t.addVariable.selectors.submit,t.addVariable.append)}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,a){t.autocomplete={data:{},selectors:{submit:"[data-am-autocomplete-submit]"},submitForm:function(t){t.preventDefault()
;var e=a(t.target).closest("form");setTimeout(function(){e.submit()},50)}},a(document).on("ready",function(){a(".am-dashboard").length>0&&a.post("?ajax=autocomplete",function(a){t.autocomplete.data=a},"json")}),a(document).on("keydown",t.autocomplete.selectors.submit+' .am-u-autocomplete input[type="text"]',function(a){13==a.which&&t.autocomplete.submitForm(a)}),a(document).on("click",t.autocomplete.selectors.submit+" .am-u-dropdown a",t.autocomplete.submitForm)
}(window.Automad=window.Automad||{},jQuery),function(t,a){t.count={dataAttr:"data-am-count",get:function(e){var o=t.count;a("["+o.dataAttr+"]").each(function(){var e=a(this),n=e.data(t.util.dataCamelCase(o.dataAttr));e.text(a(n).length)})},init:function(){var e=t.count;a(document).on("ready ajaxComplete count.automad",e.get)}},t.count.init()}(window.Automad=window.Automad||{},jQuery),function(t,a){t.datetime={selector:"[data-am-datetime]",init:function(){var e=a(document),o=t.datetime
;e.on("change",o.selector+" [data-am-u-datepicker]",o.update.date),e.on("change",o.selector+" [data-am-u-timepicker]",o.update.time),e.on("focus",o.selector+" input",function(t){var e=a(t.target),n=e.closest(o.selector);n.addClass("am-u-active"),e.on("blur.automad",function(){n.removeClass("am-u-active"),e.off("blur.automad")})})},today:function(){var t=new Date,a=t.getMonth()+1,e=t.getDate();return t.getFullYear()+"-"+((""+a).length<2?"0":"")+a+"-"+((""+e).length<2?"0":"")+e},update:{date:function(e){
var o=a(e.target),n=t.datetime,i=o.closest(n.selector),r=i.find('input[type="hidden"]'),d=o.val(),s=i.find("[data-am-u-timepicker]");time=s.val(),d?(time||(time="12:00",s.val(time)),r.val(d+" "+time+":00")):(r.val(""),s.val("")),r.trigger("change")},time:function(e){var o=a(e.target),n=t.datetime,i=o.closest(n.selector),r=i.find('input[type="hidden"]'),d=o.val(),s=i.find("[data-am-u-datepicker]");date=s.val(),d||(d="12:00",o.val(d)),date||(date=n.today(),s.val(date)),
r.val(date+" "+d+":00").trigger("change")}}},t.datetime.init()}(window.Automad=window.Automad||{},jQuery),function(t,a){t.debug={log:function(t,a){var e={};e["Ajax: "+t]=a,console.log(e)}}}(window.Automad=window.Automad||{},jQuery),function(t,a,e){t.editFileInfo={dataAttr:{fileInfo:"data-am-file-info",url:"data-am-url",ext:"data-am-extension"},selectors:{modal:"#am-edit-file-info-modal",button:"#am-edit-file-info-submit",img:"#am-edit-file-info-img",icon:"#am-edit-file-info-icon",
oldName:"#am-edit-file-info-old-name",newName:"#am-edit-file-info-new-name",caption:"#am-edit-file-info-caption",download:"#am-edit-file-info-download"},destroy:function(){var e=t.editFileInfo,o=e.dataAttr,n=e.selectors;a(n.img).attr("src","").removeAttr("width").removeAttr("height"),a(n.icon).attr(o.ext,""),a(n.download).attr("href",""),a(n.oldName).val(""),a(n.newName).val(""),a(n.caption).val("").trigger("keyup")},init:function(){
var e=t.editFileInfo,o=t.util,n=e.dataAttr,i=e.selectors,r=a(this).closest("["+n.fileInfo+"]"),d=r.data(o.dataCamelCase(n.fileInfo)),s=a(i.modal);d.img?a(i.img).attr("src",d.img.src).attr("width",d.img.width).attr("height",d.img.height):a(i.icon).attr(n.ext,d.extension),a(i.oldName).val(d.filename),a(i.newName).val(d.filename),a(i.caption).val(d.caption).trigger("keyup"),a(i.download).attr("href",d.download),s.off("hide.uk.modal.automad.editFileInfo"),
s.on("hide.uk.modal.automad.editFileInfo",e.destroy)},submit:function(o){var n=t.editFileInfo,i=n.selectors,r=a(o.target),d={url:a(i.modal).data(t.util.dataCamelCase(n.dataAttr.url)),"old-name":a(i.oldName).val(),"new-name":a(i.newName).val(),caption:a(i.caption).val()};r.prop("disabled",!0),a.post("?ajax=edit_file_info",d,function(o){r.prop("disabled",!1),o.error&&t.notify.error(o.error),a(i.modal).on("hide.uk.modal.automad.editFileInfo",function(){n.destroy(),
a(i.modal).closest("form").empty().submit()}),e.modal(i.modal).hide()},"json")}},a(document).on("click",'a[href="'+t.editFileInfo.selectors.modal+'"]',t.editFileInfo.init),a(document).on("click",t.editFileInfo.selectors.button,t.editFileInfo.submit)}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,a,e){t.form={unsavedClassPrefix:"am-unsaved-",dataAttr:{handler:"data-am-handler",url:"data-am-url",submit:"data-am-submit",init:"data-am-init",autoSubmit:"data-am-auto-submit",
close:"data-am-close-on-success",confirm:"data-am-confirm",enter:"data-am-enter",watchExclude:"data-am-watch-exclude"},ajaxPost:function(o){var n=t.form,i=(n.dataAttr,a(o.target)),r=i.data(t.util.dataCamelCase(n.dataAttr.handler)),d=i.data(t.util.dataCamelCase(n.dataAttr.url)),s=i.serializeArray();d&&s.push({name:"url",value:d}),a.post("?ajax="+r,s,function(a){if(a.debug&&t.debug.log(r,a.debug),a.redirect&&(window.location.href=a.redirect),a.html&&i.html(a.html),a.error&&t.notify.error(a.error),
a.success&&t.notify.success(a.success),!a.error){var o=i.data(t.util.dataCamelCase(n.dataAttr.close));o&&e.modal(o).hide()}},"json")},confirm:function(o){o.preventDefault();var n=t.form,i=a(o.target),r=i.data(t.util.dataCamelCase(n.dataAttr.confirm));r&&i.find("input").length>0?e.modal.confirm(r,function(){n.ajaxPost(o)}):n.ajaxPost(o)},init:function(){var e=a(document),o=t.form,n=o.dataAttr;e.on("submit","["+n.handler+"]",o.confirm),e.on("click","["+n.submit+"]",function(e){
var o=a(this).data(t.util.dataCamelCase(n.submit));e.preventDefault(),a("form["+n.handler+'="'+o+'"]').submit()}),e.ready(function(){a("["+t.form.dataAttr.init+"]").trigger("submit")}),e.on("keydown","["+n.handler+"] input",function(t){13==t.which&&t.preventDefault()}),e.on("keydown","["+n.enter+"]",function(e){if(13==e.which){var o=a(e.target).data(t.util.dataCamelCase(n.enter));a(o).click()}}),
e.on("change drop cut paste","["+n.autoSubmit+"] input, ["+n.autoSubmit+"] textarea, ["+n.autoSubmit+"] select",function(t){a(t.target).closest("form").submit()}),e.on("ready",function(){a("button["+n.submit+"]").prop("disabled",!0)}),e.on("ajaxComplete",function(t,e,o){var i=o.url.replace("?ajax=","");a("button["+n.submit+'="'+i+'"]').prop("disabled",!0)}),
e.on("change drop cut paste keydown","["+n.handler+"]:not(["+n.autoSubmit+"]) input:not(["+n.watchExclude+"]), ["+n.handler+"]:not(["+n.autoSubmit+"]) textarea:not(["+n.watchExclude+"]), ["+n.handler+"]:not(["+n.autoSubmit+"]) select:not(["+n.watchExclude+"])",function(){var e=a(this).closest("["+n.handler+"]"),i=e.data(t.util.dataCamelCase(n.handler));a("html").addClass(o.unsavedClassPrefix+i),a("button["+n.submit+'="'+i+'"]:disabled').prop("disabled",!1),
a(this).prevAll(".am-u-form-label").addClass("am-form-changed"),a(this).closest(".am-u-form-icon, .am-u-htmleditor, [data-am-toggle], [data-am-datetime]").prev(".am-u-form-label").addClass("am-form-changed"),a(this).closest(".am-u-grid").prev(".am-u-form-label").addClass("am-form-changed")}),e.on("submit","["+n.handler+"]",function(){var e=a(this).data(t.util.dataCamelCase(n.handler));a("html").removeClass(o.unsavedClassPrefix+e)}),window.onbeforeunload=function(){
if(a('html[class*="am-unsaved-"]').length)return"You have unsaved chages!"},e.on("ready ajaxComplete",o.modalEvents),e.on("ready ajaxComplete",function(){setTimeout(function(){a(".CodeMirror:not(.am-change-event)").each(function(){var t=a(this),e=t[0].CodeMirror,o=t.prev();t.addClass("am-change-event"),e.on("change",function(){o.trigger("change")})})},500)})},modalEvents:function(){var e=a(".am-u-modal");e.off("show.uk.modal.automad.form"),e.off("hide.uk.modal.automad.form"),e.on({
"show.uk.modal.automad.form":function(){a(this).find("["+t.form.dataAttr.init+"]").each(function(){a(this).empty().submit()}),a(this).find('input:not(:disabled, [type="hidden"])').first().focus()},"hide.uk.modal.automad.form":function(){a(this).find("form").each(function(){var e=a(this).data(t.util.dataCamelCase(t.form.dataAttr.handler));a("html").removeClass(t.form.unsavedClassPrefix+e),this.reset()})}})}},t.form.init()}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,a){
a.on("beforeready.uk.dom",function(){t.extend(a.components.htmleditor.prototype.defaults,{markdown:!0,toolbar:["bold","italic","link","image","blockquote","listUl","listOl"]})})}(jQuery,UIkit),function(t,a){t.inPage={selectors:{modal:"#am-inpage-edit-modal",title:"#am-inpage-edit-modal-title",fields:"#am-inpage-edit-fields",menubar:".am-inpage-menubar",dragHandle:".am-drag-handle"},dataAttr:{content:"data-am-inpage-content",handler:"data-am-inpage-handler",url:"data-am-inpage-url"},modal:{
init:function(){var e=a(this),o=t.inPage,n=t.util,i=e.data(n.dataCamelCase(o.dataAttr.content)),r=a(o.selectors.modal),d=a(o.selectors.title),s=r.find("form"),l=s.data(n.dataCamelCase(o.dataAttr.handler)),u=a("<i></i>",{class:"am-u-icon-circle-o-notch am-u-icon-spin am-u-text-muted"}).insertAfter(d.parent()),c=s.find(".am-u-modal-footer");d.empty(),a(o.selectors.fields).remove(),a.post(l,i,function(t){if(t.html){var e=a(t.html).insertBefore(c).hide(),o=e.find('[name="context"]').val();d.text(o),
setTimeout(function(){a(window).resize()},400),setTimeout(function(){u.remove(),e.fadeIn(300,function(){a(window).resize(),e.find(".am-u-form-controls, textarea").focus()})},600)}},"json")},submit:function(e){e.preventDefault();var o=a(e.target),n=o.data(t.util.dataCamelCase(t.inPage.dataAttr.handler)),i=o.serializeArray();a.post(n,i,function(a){a.debug&&t.debug.log(n,a.debug),a.redirect&&(window.location.href=a.redirect)},"json")}},menubar:{init:function(){var e=t.inPage.selectors
;a(e.menubar).draggabilly({handle:e.dragHandle})}}},a(document).on("click",'[href="'+t.inPage.selectors.modal+'"]',t.inPage.modal.init),a(document).on("submit","["+t.inPage.dataAttr.handler+"]",t.inPage.modal.submit),a(document).on("ready",t.inPage.menubar.init)}(window.Automad=window.Automad||{},jQuery),function(t){t(document).ready(function(){t("#am-no-js").remove()})}(jQuery),function(t,a){t.keyCombos={init:function(){a(window).bind("keydown",function(t){
if(t.ctrlKey||t.metaKey)switch(String.fromCharCode(t.which).toLowerCase()){case"s":t.preventDefault(),a('.am-navbar [data-am-submit], .am-inpage .am-u-open [type="submit"]').click();break;case" ":t.preventDefault(),a('.am-navbar-search [name="query"]').focus()}})}},t.keyCombos.init()}(window.Automad=window.Automad||{},jQuery),function(t,a,e){t.notify={error:function(t){e.notify(t,{timeout:1e4,pos:"top-right",status:"danger"})},success:function(t){e.notify(t,{timeout:3e3,pos:"top-right",
status:"success"})}}}(window.Automad=window.Automad||{},jQuery,UIkit),function(t){t(document).on("click",".am-remove-parent",function(){var a=t(this).parent();a.find("input, textarea").trigger("change"),a.remove(),t(document).trigger("count.automad")})}(jQuery),function(t,a){t.scrollbars={defaults:{scrollToItem:!1},dataAttr:"data-am-scroll-box",init:function(){var e=t.scrollbars,o=t.util;a("["+e.dataAttr+"]").each(function(){
var t=a(this),n=t.data(o.dataCamelCase(e.dataAttr)),i=a.extend({},e.defaults,n);if(t.mCustomScrollbar({scrollbarPosition:"inside",theme:"minimal-dark",autoHideScrollbar:!0,scrollInertia:50,scrollButtons:{enable:!1},callbacks:{onScroll:function(){t.trigger("scrolled.automad")},onUpdate:function(){t.trigger("scrolled.automad")}}}),i.scrollToItem){var r=t.find(i.scrollToItem);r.length&&setTimeout(function(){r.offset().top+180>a(window).height()&&t.mCustomScrollbar("scrollTo",function(){
return r.offset().top-a(window).height()+180},{scrollInertia:200})},150)}})}},a(document).ready(t.scrollbars.init)}(window.Automad=window.Automad||{},jQuery),function(t,a,e){t.sidebar={dataAttr:"data-am-toggle-sidebar",classActive:"am-u-active",toggle:function(o){o.preventDefault();var n=t.sidebar,i=a(this).data(t.util.dataCamelCase(n.dataAttr));a(i).hasClass(n.classActive)?e.offcanvas.hide(!1):e.offcanvas.show(i)},init:function(){var e=t.sidebar,o=a("["+e.dataAttr+"]");o.on("click",e.toggle),
a(".am-u-offcanvas").on({"hide.uk.offcanvas":function(){o.find("i").addClass("am-u-icon-navicon").removeClass("am-u-icon-close")},"show.uk.offcanvas":function(){o.find("i").removeClass("am-u-icon-navicon").addClass("am-u-icon-close")}})}},a(document).on("ready",t.sidebar.init)}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,a){t.siteTree={class:{active:"am-u-active",iconOpen:"am-tree-icon-open",iconClose:"am-tree-icon-close",toggle:"am-tree-toggle"},dataAttr:"data-am-tree",
urlAsValue:function(e,o){var n=t.siteTree,i=e.find('a[href^="?"]'),r=e.find("."+n.class.active+' > a[href^="?"]');r.length>0&&o.val(decodeURIComponent(r.attr("href").split("=")[1])),i.click(function(t){t.preventDefault();var i=a(this),r=i.parent(),d=decodeURIComponent(i.attr("href").split("=")[1]);e.find("."+n.class.active).removeClass(n.class.active),r.addClass(n.class.active),r.find("> a").has("."+n.class.iconOpen).click(),o.val(d).trigger("change")})},init:function(){var e=t.siteTree
;a("["+e.dataAttr+"]").each(function(){var o=a(this),n=o.data(t.util.dataCamelCase(e.dataAttr));o.find("li li").has("li").each(function(){var t=a(this),o=t.children("ul"),n=a("<a></a>",{class:e.class.toggle,href:"#"}).prependTo(t),i=a("<i></i>").prependTo(n);t.hasClass(e.class.active)||t.find("."+e.class.active).length>0?i.addClass(e.class.iconClose):(i.addClass(e.class.iconOpen),o.hide()),n.click(function(t){t.preventDefault(),o.toggle(),i.toggleClass(e.class.iconOpen+" "+e.class.iconClose)})
}),n.length>0&&e.urlAsValue(o,a(n))})}},a(document).ready(t.siteTree.init)}(window.Automad=window.Automad||{},jQuery),function(t,a){t.status={dataAttr:"data-am-status",get:function(){var e=t.status;a("["+e.dataAttr+"]").each(function(){var o=a(this),n=o.data(t.util.dataCamelCase(e.dataAttr));a.post("?ajax=status",{item:n},function(t){o.html(t.status)},"json")})},init:function(){var e=a(document),o=t.status;e.ready(function(){o.get()}),e.ajaxComplete(function(t,a,e){"?ajax=status"!=e.url&&o.get()
})}},t.status.init()}(window.Automad=window.Automad||{},jQuery),function(t,a,e){t.switcher={dataAttr:{switcher:"data-am-u-switcher",tab:"data-am-tab"},getActiveTab:function(){return window.location.hash?a("["+t.switcher.dataAttr.tab+'="'+window.location.hash.substr(1)+'"]').index():0}},e.on("beforeready.uk.dom",function(){a.extend(e.components.switcher.prototype.defaults,{active:t.switcher.getActiveTab()})}),a(window).on("hashchange",function(){
var e=a("["+t.switcher.dataAttr.switcher+"]"),o=e.children(".am-u-active"),n=t.switcher.getActiveTab();o.index()!=n&&e.children("button").eq(n).click()}),a(document).on("ready",function(){a("["+t.switcher.dataAttr.switcher+"]").on("show.uk.switcher",function(a,e){window.location.hash=e.data(t.util.dataCamelCase(t.switcher.dataAttr.tab))})})}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,a){t.textarea={selector:"textarea.am-u-form-controls:not([data-am-u-htmleditor])",
handleTabs:function(t){if(9===t.keyCode){t.preventDefault();var e=this.selectionStart,o=this.selectionEnd,n=a(t.target),i=n.val();n.val(i.substring(0,e)+"\t"+i.substring(o)),this.selectionStart=this.selectionEnd=e+1}},init:function(){var e=t.textarea,o=a(document);o.on("keyup focus focusout update.automad.textarea",e.selector,e.resize),o.on("drop cut paste",e.selector,function(t){var e=a(t.target);setTimeout(function(t){e.trigger("update.automad.textarea")},50)}),o.ajaxComplete(function(){
a(e.selector).trigger("update.automad.textarea")}),o.on("click","[data-am-u-toggle]",function(){a(e.selector).trigger("update.automad.textarea")}),a(window).resize(function(){a(e.selector).trigger("update.automad.textarea")}),o.on("keydown",e.selector,e.handleTabs)},resize:function(t){var e=a(t.target),o=e.val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />"),n=a("<div></div>").appendTo("body").hide().width(e.width()).html(o+" ").css({"white-space":"pre-wrap",
"word-wrap":"break-word","overflow-wrap":"break-word","font-family":e.css("font-family"),"font-size":e.css("font-size"),"line-height":e.css("line-height"),"letter-spacing":e.css("letter-spacing")});e.height(n.height()),n.remove()}},t.textarea.init()}(window.Automad=window.Automad||{},jQuery),function(t,a){t.toggle={labelDataAttr:"data-am-toggle",class:{active:"am-u-active"},checkbox:function(e){t.toggle.update(a(e.target))},init:function(){a("["+t.toggle.labelDataAttr+"] input").each(function(){
t.toggle.update(a(this))})},radio:function(e){a('input[name="'+a(e.target).attr("name")+'"]').each(function(){t.toggle.update(a(this))})},update:function(e){var o=t.toggle,n=e.parent(),i=n.data(t.util.dataCamelCase(o.labelDataAttr));if(e.is(":checked")?n.addClass(o.class.active):n.removeClass(o.class.active),i){var r=a(i);e.is(":checked")?r.addClass(o.class.active):r.removeClass(o.class.active)}}},a(document).on("change","["+t.toggle.labelDataAttr+'] [type="checkbox"]',t.toggle.checkbox),
a(document).on("change","["+t.toggle.labelDataAttr+'] [type="radio"]',t.toggle.radio),a(document).on("ready ajaxComplete",t.toggle.init)}(window.Automad=window.Automad||{},jQuery),function(t,a){t.upload={dataAttr:{url:"data-am-url",dropzoneText:"data-am-dropzone-text",browseText:"data-am-browse-text"},selectors:{modal:"#am-upload-modal",container:"#am-upload-container"},$modal:"",$container:"",$close:"",page:"",$dropzone:a("<div></div>",{class:"am-files-dropzone am-u-hidden-touch"}),
$input:a('<input type="file" multiple />'),$browse:a("<button></button>",{class:"am-u-button am-u-button-primary am-u-width-1-1 am-u-margin-large-top"}).click(function(){return t.upload.$input.click(),!1}),init:function(e){var o=t.upload,n=t.util,i=o.dataAttr;o.$modal=a(o.selectors.modal),o.$container=a(o.selectors.container).empty(),o.page=o.$modal.data(n.dataCamelCase(i.url)),
o.$dropzone.html('<i class="am-u-icon-mouse-pointer"></i>&nbsp;&nbsp;'+o.$modal.data(n.dataCamelCase(i.dropzoneText))).appendTo(o.$container),o.$input.appendTo(o.$dropzone).hide(),o.$browse.html('<i class="am-u-icon-folder-open"></i>&nbsp;&nbsp;'+o.$modal.data(n.dataCamelCase(i.browseText))).insertAfter(o.$dropzone),a("<hr />").appendTo(o.$container),o.$close=o.$modal.find(".am-u-modal-close"),o.plugin(),a(o.selectors.modal).on("hide.uk.modal",{$filesForm:o.$modal.closest("form")},o.refresh)},
plugin:function(){var e=t.upload;e.$input.fileupload({url:"?ajax=upload",dataType:"json",dropZone:e.$dropzone,sequentialUploads:!0,singleFileUploads:!0,formData:[{name:"url",value:e.page}],add:function(o,n){var i="";a.each(n.files,function(a){i+='<div class="am-text-white am-u-margin-small-bottom am-u-text-truncate">'+n.files[a].name+'</div><div class="am-u-text-small am-u-text-muted">'+t.util.formatBytes(n.files[a].size)+"</div>"}),n.context=a("<div></div>",{class:"am-u-margin-large-top"
}).appendTo(e.$container),a(i).appendTo(n.context),a('<div class="am-u-progress am-u-progress-mini"><div class="am-u-progress-bar"></div></div>').appendTo(n.context),a("<div></div>",{class:"am-progress am-u-text-small am-u-text-muted"}).html('<i class="am-u-icon-circle-o-notch am-u-icon-spin"></i>').appendTo(n.context),n.context.find(".am-u-progress-bar").width("0px"),n.submit(),e.$close.prop("disabled",!0)},progress:function(t,a){var e=parseInt(a.loaded/a.total*100,10)
;a.context.find(".am-progress").text(e+" %"),a.context.find(".am-u-progress-bar").width(e+"%")},stop:function(t){e.$close.prop("disabled",!1)},done:function(a,e){e.context.find(".am-u-progress"),e.result.error?(e.context.find(".am-u-progress").addClass("am-u-progress-danger").find(".am-u-progress-bar"),e.context.find(".am-progress").text(e.result.error)):e.context.find(".am-u-progress").addClass("am-u-progress-success"),e.result.debug&&t.debug.log("upload",e.result.debug)},fail:function(t,a){
a.context.find(".am-u-progress").addClass("am-u-progress-danger"),a.context.find(".am-u-progress-bar").text("Error")}})},refresh:function(t){t.data.$filesForm.empty().submit()}},a(document).on("click",'[href="'+t.upload.selectors.modal+'"]',t.upload.init),a(document).on("drop dragover",t.upload.selectors.modal,function(t){t.preventDefault()})}(window.Automad=window.Automad||{},jQuery),function(t,a){t.util={dataCamelCase:function(t){return t=t.replace(/data-/g,""),t=t.replace(/\-[a-z]/g,function(t){
return t.charAt(1).toUpperCase()})},formatBytes:function(t){return"number"!=typeof t?"":t>=1e9?(t/1e9).toFixed(2)+" gb":t>=1e6?(t/1e6).toFixed(2)+" mb":(t/1e3).toFixed(2)+" kb"}}}(window.Automad=window.Automad||{},jQuery);